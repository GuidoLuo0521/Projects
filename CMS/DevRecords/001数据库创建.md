# 概述

公司员工系统，数据库创建。这里选择

# 分析

首先要保存员工，那肯定员工要一张表咯，然后员工的权限，员工的角色，员工的部门，员工的职务。本来这五张表就差不多了，可以查询了

但是为了更好的管理用户与角色，角色和权限的多对多的关系。可以增加另外两张表，角色权限表，职工角色表。

**所以**

总共七张表

* 职工信息表
* 权限表
* 角色表
* 部门信息表
* 职务表
* 角色权限表
* 职工角色表

# 表

## 职工信息表

包含职工的所有个人信息

<center>职工信息表（staff）</center>

| 列名            | 数据类型    | 长度 | 是否允许为空 | 说明                                               |
| --------------- | ----------- | ---- | ------------ | -------------------------------------------------- |
| `StaffID`       | `int`       | 11   | 否           | 职工编号（主键）                                   |
| `StaffName`     | `varchar`   | 20   | 否           | 职工姓名                                           |
| `StaffPassword` | `varchar`   | 30   | 否           | 密码                                               |
| `Sex`           | `char`      | 2    | 否           | 性别（0 未知，1 男，2 女）                         |
| `Department`    | `varchar`   | 30   | 否           | 部门                                               |
| `JobName`       | `varchar`   | 30   | 否           | 职务                                               |
| `Wage`          | `float`     | 11   | 否           | 工资                                               |
| `WorkingAge`    | `smallint`  | 3    | 否           | 工龄                                               |
| `Brithday`      | `TIMESTAMP` | 8    | 否           | 出生日期                                           |
| `Place`         | `varchar`   | 50   | 否           | 籍贯                                               |
| `Education`     | `varchar`   | 20   | 否           | 学历                                               |
| `Specialty`     | `varchar`   | 30   | 否           | 专业                                               |
| `Address`       | `varchar`   | 100  | 否           | 住址                                               |
| `Email`         | `varchar`   | 20   | 否           | 电子邮箱                                           |
| `Phone`         | `varchar`   | 20   | 否           | 电话号码                                           |
| `EnterCampany`  | `TIMESTAMP` | 8    | 否           | 入职时间                                           |
| `LeaveCampany`  | `TIMESTAMP` |      | 是           | 离职时间                                           |
| `Introduction`  | `varchar`   | 100  | 是           | 说明                                               |
| `Resignation`   | `int`       | 1    | 否           | 是否离职 0:就职，1：办理入职，2，办理离职，3：离职 |
| `Params`        | `varchar`   | 10   | 是           | 预留字段                                           |



## 权限表

<center>权限表(Permission)</center>

| 列名             | 数据类型  | 长度 | 是否允许为空 | 说明         |
| ---------------- | --------- | ---- | ------------ | ------------ |
| `PermissionID`   | `int`     | 11   | 否           | 权限（主键） |
| `PermissionName` | `varchar` | 20   | 否           | 权限名称     |
| `Params`         | `varchar` | 10   | 是           | 预留字段     |





## 角色表

<center>角色表（Role）</center>

| 列名          | 数据类型  | 长度 | 是否允许为空 | 说明             |
| ------------- | --------- | ---- | ------------ | ---------------- |
| `RoleID`      | `int`     | 11   | 否           | 角色编号（主键） |
| `RoleName`    | `varchar` | 20   | 否           | 角色名称         |
| `Description` | `varchar` | 80   | 是           | 说明             |
| `Params`      | `varchar` | 10   | 是           | 预留字段         |



## 职工-角色表

<center>职工-角色表（StaffRole）</center>

| 列名      | 数据类型  | 长度 | 是否允许为空 | 说明             |
| --------- | --------- | ---- | ------------ | ---------------- |
| `RoleID`  | `int`     | 11   | 否           | 角色编号（外键） |
| `StaffID` | `int`     | 11   | 否           | 权限编号（外键） |
| `Params`  | `varchar` | 10   | 是           | 预留字段         |
|           |           |      |              |                  |



## 角色-权限表

<center>角色-权限表（RolePermission）</center>

| 列名           | 数据类型  | 长度 | 是否允许为空 | 说明             |
| -------------- | --------- | ---- | ------------ | ---------------- |
| `RoleID`       | `int`     | 11   | 否           | 角色编号（外键） |
| `PermissionID` | `int`     | 11   | 否           | 权限编号（外键） |
| `Description`  | `varchar` | 80   | 是           | 说明描述         |
| `Params`       | `varchar` | 10   | 是           | 预留字段         |



## 部门信息表

<center>部门信息表（Department）</center>

| 列名             | 数据类型  | 长度 | 是否允许为空 | 说明             |
| ---------------- | --------- | ---- | ------------ | ---------------- |
| `DepartmntID`    | `int`     | 11   | 否           | 部门编号（主键） |
| `DepartmentName` | `varchar` | 30   | 否           | 部门名称         |
| `Description`    | `varchar` | 80   | 是           | 说明             |
| `Params`         | `varchar` | 10   | 是           | 预留字段         |



## 职务信息表

<center>职务信息表（Job）</center>

| 列名          | 数据类型  | 长度 | 是否允许为空 | 说明             |
| ------------- | --------- | ---- | ------------ | ---------------- |
| `JobID`       | `int`     | 11   | 否           | 职务编号（主键） |
| `JobName`     | `varchar` | 30   | 否           | 职务名称         |
| `BasicWage`   | `float`   | 11   | 否           | 职务基本工资     |
| `Description` | `varchar` | 80   | 是           | 说明             |



# 数据库语句

## 创建表

其实现在的辅助软件如，`Navicat `都有了创建表的快捷方式，但是为了熟悉加深印象，还是写一下。

### 语法

~~~c++
在 MySQL 中，可以使用 CREATE TABLE 语句创建表。其语法格式为：
CREATE TABLE <表名> ([表定义选项])[表选项][分区选项];

其中，[表定义选项]的格式为：
<列名1> <类型1> [,…] <列名n> <类型n>
~~~

#### 例子

语句

~~~mysql
　>CREATE TABLE table_name(
　　　　>id TINYINT UNSIGNED NOT NULL AUTO_INCREMENT,　　　　//id值，无符号、非空、递增——唯一性，可做主键。
　　　　>name VARCHAR(60) NOT NULL
　　　　>score TINYINT UNSIGNED NOT NULL DEFAULT 0,　　　　//设置默认列值
　　　　>PRIMARY KEY(id)
　　　　>)ENGINE=InnoDB　　　　//设置表的存储引擎，一般常用InnoDB和MyISAM；InnoDB可靠，支持事务；MyISAM高效不支持
~~~







## 职工信息表

~~~mysql
#DROP TABLE IF EXISTS Staff;

CREATE TABLE Staff(
	StaffID int(11) NOT NULL COMMENT '职工编号（主键）' AUTO_INCREMENT,
	StaffName VARCHAR(20) NOT NULL COMMENT '职工姓名',
	StaffPassword VARCHAR(30) NOT NULL COMMENT '密码',
	Sex int(1) NOT NULL COMMENT '性别（0 未知，1 男，2 女）',
	Brithday TIMESTAMP NOT NULL COMMENT '出生日期 YYYYMMDD',
	Department VARCHAR(30) NOT NULL DEFAULT '未分配' COMMENT '部门',
	JobName VARCHAR(30) NOT NULL DEFAULT '未分配' COMMENT '职务',
	Wage FLOAT(11,2) NOT NULL COMMENT '工资',
	WorkingAge SMALLINT(3) NOT NULL DEFAULT 0 COMMENT '工龄',
	Place VARCHAR(50) NOT NULL DEFAULT '未知' COMMENT '籍贯',
	Education VARCHAR(20) NOT NULL DEFAULT '未知' COMMENT '学历',
	Specialty VARCHAR(3) NOT NULL DEFAULT '未知' COMMENT '专业',
	Address VARCHAR(100) NOT NULL DEFAULT '未知' COMMENT '住址',
	Email VARCHAR(20) NOT NULL DEFAULT '未知' COMMENT '邮件',
	Phone VARCHAR(20) NOT NULL DEFAULT '未知' COMMENT '电话',
	EnterCampany TIMESTAMP NOT NULL DEFAULT NOW() COMMENT '入职时间 YYYYMMDD',
	LeaveCampany TIMESTAMP NOT NULL DEFAULT NOW() COMMENT '离职时间 YYYYMMDD',
	Introduction VARCHAR(100) DEFAULT '暂无' COMMENT '描述',
	Resignation int(1) NOT NULL COMMENT '是否离职 0:就职，1：办理入职，2，办理离职，3：离职',
	Params VARCHAR(10) COMMENT '预留字段',
	PRIMARY KEY(StaffID)
	);	
~~~





## 权限表

~~~mysql
#DROP TABLE IF EXISTS Permission;

CREATE TABLE Permission (
	PermissionID int(11) NOT NULL,
	PermissionName VARCHAR(20) NOT NULL,
	Params VARCHAR(10),
	PRIMARY KEY(PermissionID)
	);		 
~~~

